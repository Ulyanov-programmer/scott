import{elementsIsExist as l}from"../general.js";import"../scroll-timeline.js";const o=class{constructor(e,...t){if(o.repeatingAnimations=e.repeatingAnimations,t.length<=0){console.error("[AnimateByScroll] No one AnimationGroup or AnimationTimeline have been created.");return}e.activeAnimationClass&&(o.activeAnimationClass=e.activeAnimationClass)}};let n=o;n.repeatingAnimations=!1,n.activeAnimationClass="active";export{n as default};export class AnimationGroup{constructor(e,...t){l(e.selectors)==!1&&console.log("[AnimationGroup] Element is not exist!"),this.htmlElements=document.querySelectorAll(e.selectors);for(let i of this.htmlElements)i.setAttribute("data-timeout",e.timeoutBeforeStart.toString()),i.setAttribute("data-view-start-coeff",e.animateStartCoeff.toString());this.defTimeoutBeforeStart=e.timeoutBeforeStart,this.defAnimStartCoeffs=e.animateStartCoeff,this.mediaQueries=t,this.setMediaProperties(),this.createIntersectionObserver(),window.addEventListener("resize",()=>{this.setMediaProperties()},!1)}setMediaProperties(){if(!(this.mediaQueries.length<=0))for(let e of this.mediaQueries)if(window.outerWidth<=e.activationWidth)for(let t of this.htmlElements)t.setAttribute("data-timeout",e.timeoutBeforeStart.toString()),t.setAttribute("data-view-start-coeff",e.defAnimStartCoeffs.toString());else for(let t of this.htmlElements)t.setAttribute("data-timeout",this.defTimeoutBeforeStart.toString()),t.setAttribute("data-view-start-coeff",this.defAnimStartCoeffs.toString())}createIntersectionObserver(){let e={threshold:this.defAnimStartCoeffs},t=function(s){for(let a of s){let r=a.target;a.isIntersecting&&!r.classList.contains(n.activeAnimationClass)?(setTimeout(()=>{r.classList.add(n.activeAnimationClass)},parseInt(r.dataset.timeout)),n.repeatingAnimations==!1&&i.unobserve(a.target)):a.isIntersecting==!1&&n.repeatingAnimations&&r.classList.remove(n.activeAnimationClass)}};const i=new IntersectionObserver(t,e);for(let s of this.htmlElements)i.observe(s)}}export class AnimationMediaQuery{constructor(e){this.activationWidth=e.activationWidth,this.defAnimStartCoeffs=e.defAnimStartCoeffs,this.timeoutBeforeStart=e.timeoutBeforeStart}}export class AnimationTimelineMediaQuery{constructor(e){this.activationWidth=e.activationWidth,this.properties=e.properties,this.settings=e.settings}}export class AnimationTimeline{constructor(e,...t){this.animatedElements=document.querySelectorAll(e.selectors),this.animatedProperties=e.animatedProperties,this.animateSettings=e.animateSettings,this.setDefaultAnimateSettingsIfNull(e.animateSettings),this.mediaQueries=t,this.animateElements(this.animatedElements,this.animatedProperties,this.animateSettings),this.setMediaQueries(),this.animatedElements.length>0&&window.addEventListener("resize",()=>{this.setMediaQueries()},!1)}setDefaultAnimateSettingsIfNull(e){e.fill||(e.fill="forwards")}setMediaQueries(){if(!(this.mediaQueries.length<=0))for(let e of this.mediaQueries)window.outerWidth<=e.activationWidth?this.animateElements(this.animatedElements,e.properties,e.settings):this.animateElements(this.animatedElements,this.animatedProperties,this.animateSettings)}animateElements(e,t,i){for(let s of e)s.animate(t,{duration:i.duration,fill:i.fill,timeline:i.timeline,timeRange:i.timeRange})}}
